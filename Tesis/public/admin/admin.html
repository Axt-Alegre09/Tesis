<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Paniquiños — Panel de Administración</title>
    <link rel="shortcut icon"
        href="https://jyygevitfnbwrvxrjexp.supabase.co/storage/v1/object/public/productos/paniquinosico.ico" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="admin.css" />
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Paniquiños Admin</a>
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a id="btnCerrarSesion" class="nav-link" href="#">Cerrar sesión</a></li>
            </ul>
        </div>
    </nav>


    <!-- LOGIN -->
    <div class="container-auth" id="vistaAuth">
        <div class="card card-auth shadow-sm">
            <div class="card-body">
                <h5 class="card-title mb-3">Acceso administrativo</h5>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" id="campoEmail" class="form-control" placeholder="admin@paniquinos.com" />
                </div>
                <div class="mb-3">
                    <label class="form-label">Contraseña</label>
                    <input type="password" id="campoPassword" class="form-control" />
                </div>
                <button id="btnIniciarSesion" class="btn btn-primary w-100">Entrar</button>
                <div id="msgLogin" class="small text-danger mt-2"></div>
            </div>
        </div>
    </div>


    <!-- APLICACIÓN -->
    <div class="container-fluid app" id="app" hidden>
        <div class="row g-3">
            <!-- SIDEBAR -->
            <aside class="col-12 col-md-3 col-lg-2">
                <div class="list-group">
                    <a class="list-group-item list-group-item-action active" data-section="dashboard"
                        href="#">Dashboard</a>
                    <a class="list-group-item list-group-item-action" data-section="productos" href="#">Productos</a>
                    <a class="list-group-item list-group-item-action" data-section="pedidos" href="#">Pedidos</a>
                    <a class="list-group-item list-group-item-action" data-section="cms" href="#">Banners / CMS</a>
                    <a class="list-group-item list-group-item-action" data-section="ajustes" href="#">Ajustes</a>
                </div>
            </aside>


            <!-- MAIN -->
            <main class="col-12 col-md-9 col-lg-10">
                <!-- DASHBOARD -->
                <section id="sec-dashboard">
                    <div class="row g-3">
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="card stat">
                                <div class="card-body">
                                    <h6>Total ventas (30d)</h6>
                                    <div class="h3" id="statVentas">–</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="card stat">
                                <div class="card-body">
                                    <h6>Pedidos (30d)</h6>
                                    <div class="h3" id="statPedidos">–</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="card stat">
                                <div class="card-body">
                                    <h6>Clientes</h6>
                                    <div class="h3" id="statClientes">–</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-lg-3">
                            <div class="card stat">
                                <div class="card-body">
                                    <h6>Stock bajo</h6>
                                    <div class="h3" id="statStockBajo">–</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- PRODUCTOS -->
                <label class="form-label">Imagen principal</label>
                <input id="pImagen" type="file" class="form-control" accept="image/*" />
                <div class="form-text">Se sube al bucket <code>productos/</code></div>
        </div>
    </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button id="btnGuardarProducto" class="btn btn-primary">Guardar</button>
    </div>
    </div>
    </div>
    </div>
    </section>


    <!-- PEDIDOS -->
    <section id="sec-pedidos" hidden>
        <div class="barra-superior">
            <h5 class="mb-0">Pedidos</h5>
            <select id="filtroEstado" class="form-select form-select-sm filtro-estado">
                <option value="">Todos</option>
                <option>nuevo</option>
                <option>confirmado</option>
                <option>preparando</option>
                <option>entregado</option>
                <option>cancelado</option>
            </select>
        </div>
        <div class="table-responsive">
            <table class="table table-sm align-middle">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Cliente</th>
                        <th>Estado</th>
                        <th>Total</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tablaPedidos"></tbody>
            </table>
        </div>
    </section>


    <!-- CMS -->
    <section id="sec-cms" hidden>
        <div class="barra-superior">
            <h5 class="mb-0">Banners / CMS</h5>
            <button id="btnNuevoCMS" class="btn btn-sm btn-success">Nuevo</button>
        </div>
        <div id="listaCMS" class="row g-3"></div>
    </section>


    <!-- AJUSTES -->
    <section id="sec-ajustes" hidden>
        <h5>Roles y accesos</h5>
        <p class="text-muted">Asigna roles a correos registrados.</p>
        <div class="row g-2">
            <div class="col-md-5"><input id="ajEmail" class="form-control" placeholder="usuario@ejemplo.com" /></div>
            <div class="col-md-3">
                <select id="ajRol" class="form-select">
                    <option>owner</option>
                    <option>admin</option>
                    <option>manager</option>
                    <option>staff</option>
                    <option>cliente</option>
                </select>
            </div>
            <div class="col-md-2"><button id="btnAsignarRol" class="btn btn-primary w-100">Asignar</button></div>
        </div>
        <div id="ajMsg" class="small mt-2"></div>
    </section>
    </main>
    </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="admin.js"></script>
</body>

</html>