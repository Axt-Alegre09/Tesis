<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Paniquiños — Admin</title>

  <link rel="shortcut icon" href="https://jyygevitfnbwrvxrjexp.supabase.co/storage/v1/object/public/productos/paniquinosico.ico" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- CSS existentes -->
  <link rel="stylesheet" href="CSS/main.css" />
  <link rel="stylesheet" href="CSS/styleschat.css" />
  <!-- CSS chico con extras de admin (lápices, etc.) -->
  <link rel="stylesheet" href="CSS/admin.css" />
</head>
<body>
  <div class="wrapper has-topbar">
    <!-- ASIDE -->
    <aside id="mobileAside" aria-label="Menú lateral">
      <header class="aside-header editable-wrap">
        <h1 class="logo">
          <img id="logoPrincipal" class="logo-principal" src="https://jyygevitfnbwrvxrjexp.supabase.co/storage/v1/object/public/productos/paniquinos.png" alt="Paniquiños">
        </h1>
        <button class="mobile-close" id="menuClose" aria-label="Cerrar menú">
          <i class="bi bi-x-lg"></i>
        </button>
        <button class="edit-btn edit-logo" title="Cambiar logo" data-action="edit-logo"><i class="bi bi-pencil"></i></button>
        <input id="fileLogo" type="file" accept="image/*" hidden>
      </header>

      <nav aria-label="Categorías">
        <ul class="menu" id="menuList">
          <li class="editable-wrap">
            <button id="todos" class="boton-menu boton-categoria active">
              <i class="bi bi-hand-index-fill"></i>
              <span data-editable>Categoría: Todos los productos</span>
            </button>
            <button class="edit-btn" title="Editar texto" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
          </li>
          <li class="editable-wrap">
            <button id="bocaditos" class="boton-menu boton-categoria">
              <i class="bi bi-hand-index"></i>
              <span data-editable>Bocaditos</span>
            </button>
            <button class="edit-btn" title="Editar texto" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
          </li>
          <li class="editable-wrap">
            <button id="confiteria" class="boton-menu boton-categoria">
              <i class="bi bi-hand-index"></i>
              <span data-editable>Confitería</span>
            </button>
            <button class="edit-btn" title="Editar texto" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
          </li>
          <li class="editable-wrap">
            <button id="panificados" class="boton-menu boton-categoria">
              <i class="bi bi-hand-index"></i>
              <span data-editable>Panificados</span>
            </button>
            <button class="edit-btn" title="Editar texto" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
          </li>
          <li class="editable-wrap">
            <button id="rosticeria" class="boton-menu boton-categoria">
              <i class="bi bi-hand-index"></i>
              <span data-editable>Rosticería</span>
            </button>
            <button class="edit-btn" title="Editar texto" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
          </li>

          <li>
            <a class="boton-menu boton-carrito" href="carrito.html">
              <i class="bi bi-cart-fill"></i>
              Carrito <span id="numerito" class="numerito">0</span>
            </a>
          </li>
        </ul>
      </nav>

      <footer class="editable-wrap">
        <p id="footerText" class="texto-footer" data-editable>© Paniquiños</p>
        <button class="edit-btn" title="Editar footer" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
      </footer>
    </aside>

    <!-- TOPBAR -->
    <div class="site-topbar within">
      <div class="topbar-inner">
        <button class="mobile-toggle" id="menuToggle" aria-label="Abrir menú" aria-controls="mobileAside" aria-expanded="false">
          <i class="bi bi-list"></i>
        </button>

        <form class="searchbar" id="searchForm" role="search">
          <i class="bi bi-search"></i>
          <input type="search" id="searchInput" placeholder="Buscar productos…" aria-label="Buscar productos" autocomplete="off" />
          <button class="searchbar-btn" type="submit">Buscar</button>
        </form>

        <div class="user-menu">
          <button class="user-chip" id="userMenuBtn" aria-haspopup="true" aria-expanded="false" aria-controls="userDropdown" type="button">
            <i class="bi bi-person"></i>
            <span class="user-name">admin@paniquinos.com</span>
            <i class="bi bi-chevron-down chevron"></i>
          </button>

          <div class="user-dropdown user-dropdown--admin" id="userDropdown" role="menu">
            <button class="dropdown-item" data-route="catering.html" type="button"><i class="bi bi-calendar3"></i> Pedidos catering</button>
            <button class="dropdown-item" data-route="pendientes.html" type="button"><i class="bi bi-box-seam"></i> Pedidos Pendientes</button>
            <button class="dropdown-item" data-route="informeVentas.html" type="button"><i class="bi bi-graph-up"></i> Reporte de ventas</button>
            <button class="dropdown-item" data-route="reporteDia.html" type="button"><i class="bi bi-bar-chart"></i> Resumen del día</button>
            <button class="dropdown-item" data-route="topProductos.html" type="button"><i class="bi bi-trophy"></i> Productos mas Vendidos</button>
            <div class="dropdown-sep" role="separator"></div>
            <button class="dropdown-item" id="updateProfileBtn" type="button"><i class="bi bi-gear"></i> Editar usuario</button>
            <button class="dropdown-item danger" id="logoutBtn" type="button"><i class="bi bi-box-arrow-right"></i> Cerrar Sesión</button>
          </div>
        </div>
      </div>
    </div>
    <!-- FIN TOPBAR -->

    <main>
      <h2 id="titulo-principal" class="titulo-principal editable-wrap">
        <span data-editable>Pensado para vos</span>
        <button class="edit-btn edit-btn--inline" title="Editar título" data-target="[data-editable]"><i class="bi bi-pencil"></i></button>
      </h2>

      <div class="contenedor-productos" id="contenedor-productos"></div>
    </main>
  </div>

  <!-- Backdrop global -->
  <div id="backdrop" class="backdrop" aria-hidden="true"></div>

  <!-- Overlay logout -->
  <div id="logoutOverlay" hidden style="position:fixed;inset:0;background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;font-size:1.1rem;color:#333;z-index:9999">
    <div class="spinner-border me-2" role="status"></div> Cerrando sesión…
  </div>

  <!-- Scripts base / catálogo -->
  <script type="module" src="JS/ScriptLoginBoot.js"></script>  <!-- opcional: wrapper que llame autoWireAuthMenu + logout -->
  <script type="module" src="JS/main.js"></script>             <!-- tu render del catálogo -->

  <!-- NUEVO: lógica admin separada -->
  <script src="JS/admin-index.js" defer></script>
</body>
</html>
