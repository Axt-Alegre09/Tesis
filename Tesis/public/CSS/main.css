/* =========================
   Variables & Reset
========================= */
:root{
  --clr-main: rgb(111, 92, 56);
  --clr-blanco: rgb(255,255,255);
  --clr-main-claro: rgb(228, 221, 207);
  --clr-gris: rgb(220, 225, 227);
  --clr-rojo: rgb(255,0,0);
  --card-img-h: 220px; /* fallback si no hay aspect-ratio */
}

*{ margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
h1,h2,h3,h4,h5,h6,p,a,input,textarea,ul{ margin: 0; padding: 0; }
ul{ list-style: none; }
a{ text-decoration: none; }
body{ background-color: var(--clr-main); }
.disabled { display: none !important; }

/* Evitar scroll cuando drawer está abierto */
body.aside-open{ overflow:hidden; }

/* =========================
   Layout base
========================= */
.wrapper{
  display: grid;
  grid-template-columns: 1fr 4fr;   /* aside | contenido */
  grid-auto-rows: auto;
  background-color: var(--clr-main);
}

/* Aside por defecto (desktop) */
aside{
  grid-column: 1 / 2;
  padding: 2rem;
  padding-right: 0;
  color: var(--clr-blanco);
  position: sticky;
  top: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.aside-header{ position: relative; }

/* Topbar */
.site-topbar.within{ margin: 1rem; }

/* Main por defecto (desktop) */
main{
  grid-column: 2 / -1;
  grid-row: 1;
  background-color: var(--clr-blanco);
  margin: 1rem;
  border-radius: 2rem;
  padding: 3rem;
}

/* =========================
   Layout SOLO para páginas con topbar (index)
========================= */
.wrapper.has-topbar aside{ grid-row: 1 / span 2; }
.wrapper.has-topbar .site-topbar.within{
  grid-column: 2 / -1;
  grid-row: 1;
  margin: 1rem;
}
.wrapper.has-topbar main{
  grid-column: 2 / -1;
  grid-row: 2;
}

/* =========================
   Navegación lateral / Tipografía
========================= */
.logo{ font-weight: 400; font-size: 1.3rem; }
.menu{ display: flex; flex-direction: column; gap: .5rem; }

.boton-menu{
  background-color: transparent;
  border: 0;
  color: var(--clr-blanco);
  cursor: pointer;
  display:flex;
  gap: 1rem;
  font-weight: 700;
  border-radius: 1rem;
  padding: .5rem;
  margin-right: 1rem;
  font-size: 1.1rem;
  width: 100%;
  align-items: center;
}
.boton-menu.active{
  background-color: var(--clr-blanco);
  color: var(--clr-main);
  width: 100%;
  padding: .5rem 2rem .5rem .5rem;
  position: relative;
}
.boton-carrito{ margin-top: 4rem; }
.bi-hand-index, .bi-hand-index-fill{ transform: rotate(90deg); }
.texto-footer{ color: var(--clr-main-claro); font-size: .85rem; text-align: center; }

.titulo-principal{
  color: var(--clr-main);
  margin-bottom: 2rem;
  font-weight: 700;
  text-align: center;
}

/* =========================
   Catálogo (index)
========================= */
.contenedor-productos{
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}
.producto{
  display: flex;
  flex-direction: column;
  background: #fff;
  border-radius: 1rem;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,.06);
}
.producto-imagen{
  width: 100%;
  display: block;
  object-fit: cover;
  object-position: center;
  height: var(--card-img-h);
  border-radius: 0;
}
@supports (aspect-ratio: 1){
  .producto-imagen{ height: auto; aspect-ratio: 1 / 1; }
}
.producto-detalles{
  background-color: var(--clr-main);
  color: var(--clr-blanco);
  padding: .75rem .8rem;
  border-radius: 0 0 1rem 1rem;
  margin-top: 0;
  display: flex;
  flex-direction: column;
  gap: .35rem;
}
.producto-titulo{ font-size: 1rem; line-height: 1.2; }
.producto-precio{ color: var(--clr-main-claro); }

.producto-agregar{
  border: 2px solid var(--clr-blanco);
  background-color: var(--clr-blanco);
  color: var(--clr-main);
  padding: .45rem .9rem;
  text-transform: uppercase;
  border-radius: 2rem;
  font-weight: 700;
  cursor: pointer;
  transition: background-color .2s, color .2s;
}
.producto-agregar:hover{
  background-color: var(--clr-main);
  color: var(--clr-blanco);
}

/* Estado vacío */
.alerta-vacia{
  grid-column: 1 / -1;
  background: #fff6e5;
  color: #7a5c2a;
  border: 1px solid #f3e0b8;
  padding: 1rem;
  border-radius: .75rem;
  text-align: center;
  font-weight: 700;
}

/* =========================
   Carrito
========================= */
.contenedor-carrito{ display: flex; flex-direction: column; gap: 1rem; }
.carrito-productos{ display: flex; flex-direction: column; gap: 1rem; }
.carrito-producto{
  display: flex; justify-content: space-between; align-items: center;
  background-color: var(--clr-gris); color: var(--clr-main);
  padding: .5rem 1.5rem .5rem .5rem; border-radius: 1rem;
}
.carrito-producto-imagen{
  width: 64px; height: 64px; object-fit: cover; object-position: center; border-radius: 1rem;
}
.carrito-producto small{ font-size: .75rem; font-weight: 700; }
.carrito-producto-eliminar{ border: 0; background-color: transparent; color: var(--clr-rojo); cursor: pointer; }

.carrito-acciones{
  display: flex; margin-top: 1rem; justify-content: space-between; align-items: center; gap: 1rem;
}
.carrito-acciones-vaciar{
  border: 0; background-color: var(--clr-gris); padding: 1rem; border-radius: 1rem;
  color: var(--clr-main); text-transform: uppercase; font-weight: 600; cursor: pointer;
}
.carrito-acciones-derecha{ display: flex; align-items: center; gap: .75rem; }
.carrito-acciones-total{
  display: flex; align-items: center; gap: .5rem; background-color: var(--clr-gris);
  padding: 1rem; border-radius: 1rem; color: var(--clr-main); font-weight: 600; text-transform: uppercase;
}
.carrito-acciones-comprar{
  border: 0; background-color: var(--clr-main); padding: 1rem 1.25rem; border-radius: 1rem;
  color: var(--clr-blanco); text-transform: uppercase; cursor: pointer;
}

/* Logo lateral */
.logo-principal{
  max-width: 12vw;
  border-radius: 2rem;
  margin-left: 30px;
  box-shadow: 0 0 20px rgba(0,0,0,.35);
}

/* =========================
   Topbar (estilos visuales)
========================= */
.site-topbar{ background: transparent; }
.topbar-inner{
  padding: .75rem 1rem;
  display: flex;
  gap: 1rem;
  align-items: center;
  justify-content: space-between;
  background: transparent;
}

/* Searchbar */
.searchbar{
  flex: 1;
  display: flex;
  align-items: center;
  gap: .5rem;
  background: #e9ecef;
  border-radius: 999px;
  padding: .5rem .75rem;
}
.searchbar i{ opacity: .7; }
.searchbar input{
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-size: .95rem;
}
.searchbar-btn{
  border: none;
  background: var(--clr-main);
  color: var(--clr-blanco);
  padding: .4rem .9rem;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
}

/* User menu */
.user-menu{ position: relative; }
.user-chip{
  display: flex; align-items: center; gap: .5rem;
  border: 1px solid #e5e5e5; background: #fff;
  border-radius: 999px; padding: .4rem .75rem; cursor: pointer;
}
.user-chip .chevron{ font-size: .8rem; opacity: .7; }
.user-dropdown{
  position: absolute; top: calc(100% + .5rem); right: 0; min-width: 200px;
  background: #fff; border: 1px solid #e5e5e5; border-radius: .5rem;
  box-shadow: 0 10px 24px rgba(0,0,0,.08); padding: .25rem; display: none; z-index: 20;
}
.user-dropdown.open{ display: block; }
.user-dropdown .dropdown-item{
  width: 100%; display: flex; align-items: center; gap: .5rem;
  padding: .6rem .75rem; border: none; background: transparent; cursor: pointer; border-radius: .35rem;
}
.user-dropdown .dropdown-item:hover{ background: #f4f4f4; }

/* =========================
   Checkout (simulador de pago)
========================= */
.checkout-form{ display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.25rem; }
.checkout-panel{ border: 2px solid var(--clr-main); border-radius: 1rem; padding: 1.25rem; background: #fff; }
.checkout-title{
  color: var(--clr-main); font-weight: 800; font-size: 1.4rem; text-align: center; margin-bottom: 1rem;
}
.checkout-title::after{
  content: ""; display: block; width: 140px; height: 4px; margin: .35rem auto 0;
  background: var(--clr-main-claro); border-radius: 4px;
}
.form-col{ display: grid; gap: .65rem; }
.form-label{ font-size: .9rem; color: var(--clr-main); font-weight: 700; }
.form-input{ width: 100%; border: 2px solid var(--clr-main); border-radius: .5rem; padding: .55rem .75rem; outline: none; }
.form-input:focus{ box-shadow: 0 0 0 3px rgba(111,92,56,.15); }
.grid-2{ display: flex; gap: .75rem; }
.metodos{ display: flex; gap: .5rem; flex-wrap: wrap; margin-bottom: .75rem; }
.metodo-chip{
  border: 2px solid var(--clr-main); color: var(--clr-main);
  padding: .5rem .75rem; border-radius: .75rem; cursor: pointer; font-weight: 700;
  display: inline-flex; align-items: center; gap: .5rem; user-select: none;
}
.metodo-chip input{ margin-right: .4rem; accent-color: var(--clr-main); }
.metodo-panel{ border: 1px dashed var(--clr-main); border-radius: .75rem; padding: .75rem; }
.metodo-panel.disabled{ display: none; }
.hint{ color: var(--clr-main); opacity: .85; font-size: .9rem; margin-bottom: .5rem; }
.list{ padding-left: 1rem; margin: 0; }
.list li{ margin: .25rem 0; }
.transfer-img{ display: block; width: 100%; border: 2px solid var(--clr-main); border-radius: .75rem; margin-top: .5rem; }
.acciones-checkout{ display: flex; justify-content: flex-end; margin-top: 1rem; gap: .5rem; }

/* Éxito */
.checkout-success{ border: 2px solid var(--clr-main); border-radius: 1rem; padding: 1.25rem; background: #fff; margin-bottom: 1.25rem; }
.checkout-success h3{ color: var(--clr-main); font-weight: 800; margin-bottom: .25rem; }

/* Vacio carrito */
.carrito-vacio{
  margin-left: 205px; font-size: 2rem; color: var(--clr-main); font-weight: 700;
  position: absolute; display: flex; align-items: center;
}
.img-carrito-vacio{ width: 300px; margin-top: 500px; margin: auto; padding: 15px; }

/* =========================
   Botón hamburguesa / cerrar / backdrop
========================= */
.mobile-toggle{
  display: none;
  border: none;
  background: #fff;
  border-radius: 12px;
  padding: .45rem .65rem;
  font-size: 1.25rem;
  line-height: 1;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
}
.mobile-toggle i{ vertical-align: middle; }

.mobile-close{
  display: none;
  position: absolute;
  top: .75rem;
  right: .75rem;
  border: none;
  background: #fff;
  color: var(--clr-main);
  border-radius: 10px;
  width: 36px; height: 36px;
  font-size: 1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
  cursor: pointer;
}

.backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.35);
  display: none;
  z-index: 900;
}
.aside-open .backdrop{ display: block; }

/* =========================
   Responsive
========================= */
@media (max-width: 1200px){
  .contenedor-productos{ grid-template-columns: repeat(3, 1fr); }
  .logo-principal{ max-width: 16vw; }
  .checkout-form{ grid-template-columns: 1fr 1fr; }
}

/* ====== MÓVIL / TABLET ====== */
@media (max-width: 900px){
  .wrapper{ grid-template-columns: 1fr; }

  /* Topbar sticky arriba en mobile */
  .site-topbar.within{
    grid-column: 1 / -1;
    grid-row: auto;
    margin: 0;
    position: sticky;
    top: 0;
    z-index: 800;
    background: var(--clr-main);
  }
  .topbar-inner{ background: var(--clr-main); }
  .searchbar{ background:#e9ecef; }

  .wrapper.has-topbar aside{ grid-row: auto; }
  .wrapper.has-topbar main{ grid-row: auto; }

  /* Main a ancho completo */
  main{
    grid-column: 1 / -1;
    grid-row: auto;
    margin: 0.75rem;
    padding: 1rem;
  }

  .contenedor-productos{ grid-template-columns: repeat(2, 1fr); }
  .checkout-form{ grid-template-columns: 1fr; }

  /* Mostrar botón hamburguesa */
  .mobile-toggle{
    display: inline-flex; align-items: center; justify-content: center;
  }

  /* Aside como panel deslizante (oculto por defecto) */
  aside{
    position: fixed;
    left: -280px;                /* oculto */
    top: 0;
    width: 260px;
    height: 100dvh;              /* mejor en móviles con notch */
    z-index: 1000;               /* por encima del backdrop y topbar */
    background: var(--clr-main);
    box-shadow: 2px 0 18px rgba(0,0,0,.25);
    transition: left .28s ease-in-out;
    padding: 1rem 1rem 2rem 1rem;
  }
  .aside-open aside{ left: 0; }  /* visible cuando body tiene la clase */

  /* Botón cerrar dentro del aside */
  .mobile-close{ display: inline-flex; align-items:center; justify-content:center; }

  /* Ajustes de logo en móvil */
  .logo-principal{
    max-width: 140px;
    margin-left: 0;
    box-shadow: 0 0 12px rgba(0,0,0,.25);
  }
}

/* Teléfonos pequeños: 1 columna de productos */
@media (max-width: 600px){
  .contenedor-productos{ grid-template-columns: 1fr; }
  :root{ --card-img-h: 200px; }
}
